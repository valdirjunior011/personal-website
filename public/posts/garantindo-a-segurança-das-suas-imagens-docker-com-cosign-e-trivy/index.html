<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Securing images using Cosign and Trivy Â· Valdir Junior
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Valdir Junior">
<meta name="description" content="Learning how to secure your Docker images using Cosign and Trivy">
<meta name="keywords" content="devops, cloud, kubernetes, docker, linux, ansible, terraform, python, aws, azure">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Securing images using Cosign and Trivy">
  <meta name="twitter:description" content="Learning how to secure your Docker images using Cosign and Trivy">

<meta property="og:url" content="http://localhost:1313/posts/garantindo-a-seguran%C3%A7a-das-suas-imagens-docker-com-cosign-e-trivy/">
  <meta property="og:site_name" content="Valdir Junior">
  <meta property="og:title" content="Securing images using Cosign and Trivy">
  <meta property="og:description" content="Learning how to secure your Docker images using Cosign and Trivy">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-02T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-02-02T00:00:00+00:00">
    <meta property="article:tag" content="Docker">
    <meta property="article:tag" content="Cosign">
    <meta property="article:tag" content="Trivy">
    <meta property="article:tag" content="Security">




<link rel="canonical" href="http://localhost:1313/posts/garantindo-a-seguran%C3%A7a-das-suas-imagens-docker-com-cosign-e-trivy/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Valdir Junior
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Publications</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/projects/">Experience</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/valdir-junior.pdf">Curriculum</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/pt-br/posts/garantindo-a-seguran%C3%A7a-das-suas-imagens-docker-com-cosign-e-trivy/">ðŸ‡§ðŸ‡·</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/garantindo-a-seguran%C3%A7a-das-suas-imagens-docker-com-cosign-e-trivy/">
              Securing images using Cosign and Trivy
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-02-02T00:00:00Z">
                February 2, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/devops/">DevOps</a>
      <span class="separator">â€¢</span>
    <a href="/categories/containers/">Containers</a>
      <span class="separator">â€¢</span>
    <a href="/categories/linux/">Linux</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/docker/">Docker</a>
    </span>
      <span class="separator">â€¢</span>
    <span class="tag">
      <a href="/tags/cosign/">Cosign</a>
    </span>
      <span class="separator">â€¢</span>
    <span class="tag">
      <a href="/tags/trivy/">Trivy</a>
    </span>
      <span class="separator">â€¢</span>
    <span class="tag">
      <a href="/tags/security/">Security</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <p><img src="https://media.licdn.com/dms/image/v2/D4E12AQFgNMFMfdYHnA/article-cover_image-shrink_720_1280/article-cover_image-shrink_720_1280/0/1693557973466?e=1758758400&amp;v=beta&amp;t=7h4EVwvYmt7k-1ArSh7o1IUs3rYhN73Eqeb-BfSyfgU" alt=""></p>
<p>Docker image security is a crucial concern for any IT team. Ensuring the authenticity and integrity of Docker images has become an undeniable priority. Docker images are the fundamental building blocks for deploying containerized applications, and any compromise in their security can result in serious consequences, ranging from data breaches to disruptions of critical services.</p>
<p>In this article, weâ€™ll look at how we can use solutions to protect your infrastructure. One of these solutions is Cosign, a Docker image security tool that has become an essential part of any container administratorâ€™s arsenal to ensure image authenticity.</p>
<p>With Cosign, you guarantee that your Docker images are authentic and have not been tampered with.</p>
<p><img src="https://media.licdn.com/dms/image/v2/D4E12AQEphSCuFt6o3w/article-inline_image-shrink_1500_2232/article-inline_image-shrink_1500_2232/0/1693560241827?e=1758758400&amp;v=beta&amp;t=kXQDGI9bhucEbQsRqr6y5GfObMJSnqIylp2nKAsvnY4" alt="Article content"></p>
<p>Signing Containers â€“ Sigstore</p>
<p>In addition, we will explore how to complement security with Trivy, a vulnerability scanning tool, to build a comprehensive approach to Docker image security.</p>
<p><img src="https://media.licdn.com/dms/image/v2/D4E12AQHwGPoxwItGLQ/article-inline_image-shrink_1500_2232/article-inline_image-shrink_1500_2232/0/1693560312187?e=1758758400&amp;v=beta&amp;t=DcMGSYCsHFjTh1w1JpEjAxln7U0h6QN5ANrQsvjH-jI" alt="Article content"></p>
<p>Trivy Home - Trivy</p>
<hr>
<ul>
<li><strong>Understanding Docker Image Security</strong></li>
</ul>
<p>Docker image security is critical in containerized environments because corrupted or compromised images can have extremely serious consequences, threatening the stability and integrity of entire systems. The threats targeting Docker images are varied and extensive.</p>
<ol>
<li>
<p><strong>Malicious Images:</strong> One of the most common threats is the possibility of malicious Docker images. This occurs when an image is designed to exploit vulnerabilities or open doors for attacks. Such images can be deceptively distributed, often disguised as legitimate or popular resources.</p>
</li>
<li>
<p><strong>Unpatched Vulnerabilities:</strong> Another major risk lies in unpatched vulnerabilities present in Docker images. An image may contain outdated components or known vulnerabilities that attackers can exploit to gain unauthorized access or compromise system integrity. Lack of regular patch management and updates makes infrastructure vulnerable to these types of threats.</p>
</li>
<li>
<p><strong>Supply Chain Attacks:</strong> Supply chain attacks have become a growing concern. In these cases, attackers compromise the process of building and distributing legitimate Docker images.</p>
</li>
</ol>
<p>Understanding these threats is essential because Docker image security is not only a technical concern but also a critical matter of data protection and business continuity. This is why tools like <strong>Cosign</strong> and <strong>Trivy</strong> play a crucial role in mitigating these risks.</p>
<hr>
<ul>
<li><strong>What is Cosign?</strong></li>
</ul>
<p>Cosign is a digital signing tool that provides authentication and verification for Docker images. It allows you to sign images with security keys, ensuring that only authenticated and trusted images are deployed in your environment.</p>
<ul>
<li><strong>Benefits of Using Cosign</strong></li>
</ul>
<p>By adopting Cosign, you can ensure that your Docker images come from trusted sources. This protects against deploying forged or compromised images. Additionally, Cosign provides an extra layer of security, helping to keep your infrastructure safe and reliable.</p>
<hr>
<ul>
<li><strong>Getting Started with Cosign</strong></li>
</ul>
<p>To start using Cosign, you can follow these simple steps:</p>
<p>Install Cosign in your environment.</p>
<ul>
<li><strong>MacOS</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">brew install cosign
</span></span></code></pre></div><ul>
<li><strong>Binary or rpm/dpkg package</strong> (<a href="https://github.com/sigstore/cosign/releases/latest"  class="external-link" target="_blank" rel="noopener">Cosign release page)</a></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl"><span class="c1"># binary</span>
</span></span><span class="line"><span class="cl">curl -O -L <span class="s2">&#34;https://github.com/sigstore/cosign/releases/latest/download/cosign-linux-amd64&#34;</span>
</span></span><span class="line"><span class="cl">mv cosign-linux-amd64 /usr/local/bin/cosign
</span></span><span class="line"><span class="cl">chmod +x /usr/local/bin/cosign
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># rpm</span>
</span></span><span class="line"><span class="cl"><span class="nv">LATEST_VERSION</span><span class="o">=</span><span class="k">$(</span>curl https://api.github.com/repos/sigstore/cosign/releases/latest <span class="p">|</span> grep tag_name <span class="p">|</span> cut -d : -f2 <span class="p">|</span> tr -d <span class="s2">&#34;v\&#34;, &#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -O -L <span class="s2">&#34;https://github.com/sigstore/cosign/releases/latest/download/cosign-</span><span class="si">${</span><span class="nv">LATEST_VERSION</span><span class="si">}</span><span class="s2">.x86_64.rpm&#34;</span>
</span></span><span class="line"><span class="cl">rpm -ivh cosign-<span class="si">${</span><span class="nv">LATEST_VERSION</span><span class="si">}</span>.x86_64.rpm
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># dkpg</span>
</span></span><span class="line"><span class="cl"><span class="nv">LATEST_VERSION</span><span class="o">=</span><span class="k">$(</span>curl https://api.github.com/repos/sigstore/cosign/releases/latest <span class="p">|</span> grep tag_name <span class="p">|</span> cut -d : -f2 <span class="p">|</span> tr -d <span class="s2">&#34;v\&#34;, &#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -O -L <span class="s2">&#34;https://github.com/sigstore/cosign/releases/latest/download/cosign_</span><span class="si">${</span><span class="nv">LATEST_VERSION</span><span class="si">}</span><span class="s2">_amd64.deb&#34;</span>
</span></span><span class="line"><span class="cl">dpkg -i cosign_<span class="si">${</span><span class="nv">LATEST_VERSION</span><span class="si">}</span>_amd64.deb
</span></span></code></pre></div><p>Next, generate a key pair. Keep your <code>.key</code> file safe as it is extramely important for signing your images.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">cosign generate-key-pair
</span></span></code></pre></div><p>Finally, sign your Docker images with Cosign using the command below:</p>
<ul>
<li>Replace cosign.key with the name of your key</li>
<li>Replace repository with your repository (for example, on <strong>DockerHub</strong>)</li>
<li>Replace image and tag with the image and tag that exist in your repository</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">cosign sign --key cosign.key repo/image:tag
</span></span></code></pre></div><p>And to verify a signed Docker image:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">cosign verify --key cosign.pub repo/image:tag
</span></span></code></pre></div><blockquote>
<p>[!info] The <code>cosign.pub</code> file is the public key generated when you created the key pair. It is used to verify the authenticity of the signed image and you can share it with anyone who needs to verify the image.</p></blockquote>
<hr>
<ul>
<li><strong><em>Security Best Practices</em></strong></li>
</ul>
<p>In addition to using Cosign, it is essential to incorporate vulnerability scanning into your Docker images. As mentioned earlier, a valuable tool for this purpose is <strong>Trivy</strong>. Trivy scans container images for known vulnerabilities and provides detailed information about any potential risks. It can be easily integrated into your CI/CD pipelines to ensure that only secure images are deployed.</p>
<p>To get started with Trivy, you can install it on:</p>
<ul>
<li>MacOs</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">brew install trivy
</span></span></code></pre></div><ul>
<li>Ubuntu</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">wget https://github.com/aquasecurity/trivy/releases/download/v0.45.0/trivy_0.45.0_Linux-64bit.deb
</span></span><span class="line"><span class="cl">sudo dpkg -i trivy_0.45.0_Linux-64bit.deb
</span></span></code></pre></div><ul>
<li>For make the scan on your images use</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">trivy image name_of_image:tag
</span></span></code></pre></div><p>The tool will scan the image layers for vulnerabilities and provide a list of any issues found. This allows you to take proactive measures to fix vulnerabilities or choose safer images.</p>
<p>Remember that security is an ongoing process. Scheduling regular scans with Trivy is therefore a recommended practice to ensure that your Docker images remain protected over time.</p>
<ul>
<li>Conclusion</li>
</ul>
<p>In summary, using Cosign and Trivy together can significantly strengthen the security of your Docker images. By adopting these best practices, you can protect your organization against threats, ensuring that your images are authentic and that vulnerabilities are mitigated.</p>

      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©  2019 -
     2025  Valdir Junior    <a></a> <a></a> 
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
